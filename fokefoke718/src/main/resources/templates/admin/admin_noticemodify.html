<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{adminconfig/layout}">
	<th:block layout:fragment="content">

<body>
	<div class="container-fluid pt-4 px-4">
	  <div class="col-sm-12 col-xl-12">
            <div class="bg-light rounded h-100 p-4">
				<form method="post" action="#" th:action="@{/admin/notice_modify/{id}(id = ${noticedto.noticeId})}" th:object="${noticeDTO}" enctype="multipart/form-data">
	                <h3 class="mb-4">이벤트 수정</h3>
	                <div class="bg-light rounded h-100 p-4">
                        <h6 class="mb-4">이미지수정</h6>
                        <div class="accordion" id="accordionExample">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingOne">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                        썸네일 이미지 수정
                                    </button>
                                </h2>
                                <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                                    <div class="accordion-body">
                                        <div><img id="previewImage" width="400" th:src="@{'/admin/display/'+${noticedto.noticeImage}}" alt="Image" /></div><br>
	                					<input class="form-control form-control-lg" type="file" id="fileItem" name="fileItem" > <br> 파일이름: <span th:text="${noticedto.noticeImage}"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingTwo">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                        상세 이미지 수정
                                    </button>
                                </h2>
                                <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                                    <div class="accordion-body">
                                        <div><img id="previewImage2" width="400" th:src="@{'/admin/display2/'+${noticedto.DetailImage}}" alt="Image" /></div><br>
	                					<input class="form-control form-control-lg" type="file" id="detailFile" name="detailFile"> <br> 파일이름: <span th:text="${noticedto.detailImage}"></span>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </div>

	                <div class="form-floating mb-3">
	                    <input type="text" name="noticeTitle" th:value="${noticedto.noticeTitle}" class="form-control" id="floatingInput">
	                    <label for="floatingInput">제목</label>
	                </div>

	                <div class="form-floating">
	                    <textarea name="noticeContent" th:text="${noticedto.noticeContent}" class="form-control" 
	                        id="floatingTextarea" style="height: 350px;"></textarea>
	                    <label for="floatingTextarea">내용</label>
	                </div>
	                
	                
	                
	                


		            <input type="submit" value="수정하기" class="btn btn-primary my-2 ban-btn">
				</form>
	    		<a href="/admin/noticelist"> <button class="btn btn-primary">목록 </button></a>
            </div>
       </div>
	</div>
	<!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/lib/chart/chart.min.js"></script>
    <script src="/lib/easing/easing.min.js"></script>
    <script src="/lib/waypoints/waypoints.min.js"></script>
    <script src="/lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="/lib/tempusdominus/js/moment.min.js"></script>
    <script src="/lib/tempusdominus/js/moment-timezone.min.js"></script>
    <script src="/lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>
    
    <!-- Template Javascript -->
    <script src="/js/admin/main.js"></script>
    
    
    <!-- 이미지ajax-->
    <script>
	$(document).ready(function() {
	  $("#fileItem").on("change", function() {
	    const imgContainer = $("#previewImage");
	    const file = this.files[0];
	
	    if(file) {
	      const reader = new FileReader();
	      reader.onload = function(e) {
	        imgContainer.attr("src", e.target.result);
	      }
	      reader.readAsDataURL(file);
	    }
	  });
	  $("#detailFile").on("change", function() {
	    const imgContainer = $("#previewImage2");
	    const file = this.files[0];
	
	    if(file) {
	      const reader = new FileReader();
	      reader.onload = function(e) {
	        imgContainer.attr("src", e.target.result);
	      }
	      reader.readAsDataURL(file);
	    }
	  });
	  
	  
	});
	</script>
	
	<!--버튼유효성-->
	<script>
		$(document).ready(function () {
		  console.log("Document is ready"); // 콘솔에 메시지 출력 (문서가 준비되었는지 확인)
		
		  $(".ban-btn").on("click", function (e) {
		    console.log("Button clicked"); // 버튼 클릭 이벤트 발생 시 콘솔에 메시지 출력
		    e.preventDefault(); // 기본 제출 동작을 방지
		    const shouldSubmit = confirm("게시물을 수정 하시겠습니까??"); // alert 대신 confirm 창을 사용
		
		    if (shouldSubmit) {
		      $(this).closest("form").submit(); // 클릭한 버튼에 가장 가까운 폼을 제출
		    }
		  });
		});
	</script>

</body>
</th:block>
</html>